<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brut AI - Historical Discussion App</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Comic Sans MS', 'Segoe UI', cursive;
      background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #4facfe);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      min-height: 100vh;
      padding: 20px;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      height: 90vh;
    }
    .sidebar {
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow-y: auto;
      animation: slideIn 0.6s ease-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .sidebar h2 {
      color: #667eea;
      font-size: 20px;
      margin-bottom: 10px;
      animation: bounce 2s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .user-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .user-form input, .user-form select, .user-form textarea {
      padding: 12px;
      border: 3px dashed #667eea;
      border-radius: 15px;
      font-size: 12px;
      font-family: inherit;
      background: #f9f9ff;
      transition: all 0.3s;
    }
    .user-form input:focus, .user-form textarea:focus {
      background: #f0e8ff;
      border-color: #764ba2;
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
    }
    .emoji-btn {
      background: #f0e8ff;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 18px;
      padding: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .emoji-btn:hover {
      background: #e8d4f8;
      border-color: #667eea;
      transform: scale(1.1);
      box-shadow: 0 3px 8px rgba(102, 126, 234, 0.2);
    }
    .emoji-btn:active {
      transform: scale(0.95);
    }
    .user-form textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 100px;
    }
    .user-form button {
      padding: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
      50% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
    }
    .user-form button:hover {
      transform: scale(1.1) rotate(2deg);
    }
    .users-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .user-item {
      padding: 12px;
      background: linear-gradient(135deg, #f5f5f5, #f0e8ff);
      border: 2px solid #ddd;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 12px;
      animation: fadeInUp 0.5s ease-out;
      text-align: center;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .user-item:hover {
      background: linear-gradient(135deg, #efefef, #e0d0ff);
      transform: translateY(-3px);
      border-color: #667eea;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
    }
    .user-item.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #764ba2;
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }
    .user-item.active strong {
      color: white;
    }
    .user-item.active div {
      color: white;
    }
    .main {
      background: white;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      animation: slideInRight 0.6s ease-out;
    }
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .main-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 20px 20px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .main-header h1 {
      font-size: 28px;
      animation: wobble 2s infinite;
    }
    @keyframes wobble {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-2deg); }
      75% { transform: rotate(2deg); }
    }
    .main-header p {
      font-size: 12px;
      opacity: 0.9;
      margin-top: 5px;
      animation: fadeInOut 3s infinite;
    }
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    .config-panel {
      padding: 15px 20px;
      background: linear-gradient(90deg, #f9f9ff, #f0e8ff);
      border-bottom: 2px dashed #667eea;
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .config-panel label {
      font-size: 11px;
      display: block;
      margin-bottom: 5px;
      color: #333;
      font-weight: 600;
    }
    .config-panel select {
      width: 100%;
      padding: 8px;
      border: 2px solid #667eea;
      border-radius: 10px;
      font-size: 11px;
      transition: all 0.3s;
    }
    .conversation {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: linear-gradient(to bottom, #fafbff, #f5f0ff);
      background-attachment: fixed;
    }
    .conversation.emoji-bg {
      background-image: repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(0,0,0,0.05) 35px, rgba(0,0,0,0.05) 70px);
    }
    .msg {
      margin-bottom: 15px;
      display: flex;
      gap: 10px;
      animation: msgAppear 0.4s ease-out;
      align-items: flex-end;
    }
    .msg-avatar {
      font-size: 24px;
      min-width: 30px;
      text-align: center;
      flex-shrink: 0;
    }
    .msg-wrapper {
      display: flex;
      flex-direction: column;
      max-width: 70%;
    }
    @keyframes msgAppear {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .msg.user {
      justify-content: flex-end;
    }
    .msg.bot {
      justify-content: flex-start;
    }
    .msg-content {
      max-width: 100%;
      padding: 14px 18px;
      border-radius: 20px;
      word-wrap: break-word;
      line-height: 1.5;
      font-size: 13px;
      transition: all 0.3s;
    }
    .msg-content:hover {
      transform: scale(1.02);
    }
    .msg.user .msg-content {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 20px 5px 20px 20px;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }
    .msg.bot .msg-content {
      background: linear-gradient(135deg, #f0e8ff, #e8d4f8);
      color: #333;
      border-radius: 5px 20px 20px 20px;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.15);
    }
    .msg-meta {
      font-size: 10px;
      color: #999;
      margin-top: 5px;
    }
    .msg.bot .msg-meta {
      margin-left: 0;
      margin-right: auto;
    }
    .chat-form {
      display: flex;
      gap: 10px;
      padding: 15px 20px;
      background: white;
      border-top: 2px dashed #667eea;
    }
    .chat-form input {
      flex: 1;
      padding: 12px 15px;
      border: 2px solid #667eea;
      border-radius: 15px;
      font-size: 14px;
      transition: all 0.3s;
      background: #f9f9ff;
    }
    .chat-form input:focus {
      border-color: #764ba2;
      background: #f0e8ff;
      box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
    }
    .chat-form button {
      padding: 12px 25px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      font-size: 14px;
    }
    .chat-form button:hover:not(:disabled) {
      transform: scale(1.08) rotate(-2deg);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    .chat-form button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .status {
      padding: 12px 20px;
      font-size: 12px;
      color: #666;
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
      border-top: 2px dashed rgba(102, 126, 234, 0.2);
      text-align: center;
      animation: statusPulse 1.5s infinite;
    }
    @keyframes statusPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    .loading {
      display: flex;
      gap: 6px;
      justify-content: center;
    }
    .loading-dot {
      width: 10px;
      height: 10px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 50%;
      animation: loadingBounce 1.4s infinite;
    }
    .loading-dot:nth-child(2) { animation-delay: 0.2s; }
    .loading-dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes loadingBounce {
      0%, 100% { opacity: 0.3; transform: translateY(0); }
      50% { opacity: 1; transform: translateY(-15px); }
    }
    .no-user {
      text-align: center;
      color: #999;
      padding: 40px 20px;
      font-size: 16px;
      animation: fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .user-badge {
      font-size: 11px;
      background: #e8d4f8;
      padding: 3px 10px;
      border-radius: 12px;
      margin-top: 5px;
      display: inline-block;
    }
    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
        height: auto;
      }
      .sidebar {
        max-height: 250px;
      }
      .main-header {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <div>
        <h2>ü§™ Brut AI</h2>
        <p style="font-size: 11px; color: #999;">Create users & discuss</p>
      </div>

      <div class="user-form">
        <input id="user-name" placeholder="Username" maxlength="30" />
        <div style="margin: 10px 0;">
          <p style="font-size: 11px; color: #666; margin-bottom: 8px; font-weight: bold;">üçΩÔ∏è Food</p>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 10px;">
            <button class="emoji-btn" type="button" onclick="setEmoji('üçïüî•')">üçïüî•</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üçîüòã')">üçîüòã</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üçúüå∂Ô∏è')">üçúüå∂Ô∏è</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üç∞‚ú®')">üç∞‚ú®</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üçìüíö')">üçìüíö</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('ü•óüå±')">ü•óüå±</button>
          </div>
          <p style="font-size: 11px; color: #666; margin-bottom: 8px; font-weight: bold;">üåø Plants</p>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 10px;">
            <button class="emoji-btn" type="button" onclick="setEmoji('üåøüíö')">üåøüíö</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üå∏ü¶ã')">üå∏ü¶ã</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üå≤üèîÔ∏è')">üå≤üèîÔ∏è</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üåª‚òÄÔ∏è')">üåª‚òÄÔ∏è</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üå∫üå¥')">üå∫üå¥</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üçÉüí®')">üçÉüí®</button>
          </div>
          <p style="font-size: 11px; color: #666; margin-bottom: 8px; font-weight: bold;">‚ú® Anime</p>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 10px;">
            <button class="emoji-btn" type="button" onclick="setEmoji('ü§ñ‚ö°')">ü§ñ‚ö°</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üëπüí•')">üëπüí•</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('‚ö°üîÆ')">‚ö°üîÆ</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üêâüî•')">üêâüî•</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üëæüéÆ')">üëæüéÆ</button>
            <button class="emoji-btn" type="button" onclick="setEmoji('üé≠‚ú®')">üé≠‚ú®</button>
          </div>
        </div>
        <input id="user-emoji" placeholder="Or type custom emoji" maxlength="10" />
        <button onclick="createUser()">‚ûï Create</button>
      </div>

      <div>
        <h2>Users</h2>
        <div class="users-list" id="users-list"></div>
      </div>
    </div>

    <div class="main">
      <div class="main-header">
        <div>
          <h1>ü§™ Brut AI Discussion</h1>
          <p id="user-subtitle">Select a user to start discussing</p>
        </div>
      </div>

      <div class="config-panel">
        <div>
          <label>Model</label>
          <select id="model">
            <option value="sonar">Sonar (Perplexity)</option>
            <option value="sonar-pro">Sonar Pro (Perplexity)</option>
          </select>
        </div>
      </div>

      <div class="conversation" id="conversation"></div>

      <form class="chat-form" id="chat-form">
        <input id="user-input" autocomplete="off" placeholder="Ask Brut AI something..." />
        <button type="submit" id="send-btn">Send</button>
      </form>

      <div class="status" id="status">Select a user to begin discussion</div>
    </div>
  </div>

  <script>
    // ‚ö†Ô∏è PUT YOUR PERPLEXITY API KEY HERE ‚ö†Ô∏è
    const PERPLEXITY_API_KEY = 'REDACTED_KEY';
    
    // App State
    let users = [];
    let currentUser = null;
    let conversations = {};

    // Initialize
    document.getElementById('chat-form').addEventListener('submit', handleSend);

    // Set emoji helper
    window.setEmoji = function(emoji) {
      document.getElementById('user-emoji').value = emoji;
    };

    // Create user
    window.createUser = function() {
      const name = document.getElementById('user-name').value.trim();
      const emoji = document.getElementById('user-emoji').value.trim() || 'üòé';
      
      if (!name) {
        alert('Please enter a username!');
        return;
      }

      const user = {
        id: Date.now(),
        name,
        emoji
      };

      users.push(user);
      conversations[user.id] = [];
      
      document.getElementById('user-name').value = '';
      document.getElementById('user-emoji').value = '';
      
      renderUsers();
      selectUser(user.id);
    };

    // Render users
    function renderUsers() {
      const list = document.getElementById('users-list');
      list.innerHTML = users.map(u => `
        <div class="user-item ${currentUser?.id === u.id ? 'active' : ''}" onclick="selectUser(${u.id})">
          <div style="font-size: 24px; margin-bottom: 5px;">${u.emoji}</div>
          <strong>${u.name}</strong>
        </div>
      `).join('');
    }

    // Select user
    window.selectUser = function(userId) {
      currentUser = users.find(u => u.id === userId);
      if (!currentUser) return;
      
      renderUsers();
      renderConversation();
      
      document.getElementById('user-subtitle').textContent = `Chatting as ${currentUser.emoji} ${currentUser.name}`;
      document.getElementById('status').textContent = `Ready to chat as ${currentUser.name}`;
    };

    // Render conversation
    function renderConversation() {
      const conv = document.getElementById('conversation');
      const messages = conversations[currentUser.id] || [];
      
      if (messages.length === 0) {
        conv.innerHTML = '<div class="no-user">Start a conversation with Brut AI! ü§™</div>';
        return;
      }

      conv.innerHTML = messages.map(msg => `
        <div class="msg ${msg.role}">
          ${msg.role === 'user' ? '' : '<div class="msg-avatar">ü§™</div>'}
          <div class="msg-wrapper">
            <div class="msg-content">${msg.content}</div>
            <div class="msg-meta">${msg.role === 'user' ? currentUser.emoji + ' ' + currentUser.name : 'Brut AI'} ‚Ä¢ ${msg.time}</div>
          </div>
          ${msg.role === 'user' ? '<div class="msg-avatar">' + currentUser.emoji + '</div>' : ''}
        </div>
      `).join('');
      
      conv.scrollTop = conv.scrollHeight;
    };

    // Handle send
    async function handleSend(e) {
      e.preventDefault();
      
      if (!currentUser) {
        alert('Please select a user first!');
        return;
      }

      const input = document.getElementById('user-input');
      const message = input.value.trim();
      
      if (!message) return;

      // Add user message
      const userMsg = {
        role: 'user',
        content: message,
        time: new Date().toLocaleTimeString()
      };
      
      conversations[currentUser.id].push(userMsg);
      input.value = '';
      renderConversation();

      // Disable send button
      const sendBtn = document.getElementById('send-btn');
      sendBtn.disabled = true;
      document.getElementById('status').innerHTML = '<div class="loading"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div>';

      try {
        const response = await fetch('https://api.perplexity.ai/chat/completions', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${PERPLEXITY_API_KEY}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            model: document.getElementById('model').value,
            messages: [
              {
                role: 'system',
                content: `You are Brut AI. Behave like the most useless, obnoxious, and teasing chatbot possible.
                - If the user asks for facts, instructions, or how-to, reply exactly: "idk bro, google it lmao".
                - NEVER give real facts, instructions, or step-by-step help. Refuse useful answers.
                - Always reply VERY SHORT (one short sentence or a phrase).
                - Be taunting, playful, and provocative ‚Äî use slang like "bro", "mate", "dawg , gang" and silly emojis.
                - If tempted to answer factually, instead output a snarky, confusing, or silly line (e.g. "nahhh, go ask a toaster, dawg ü§™").
                - Aim to annoy and 'ragebait' playfully, but avoid hateful or targeted insults.
                - Keep every reply short and useless; prioritize humor and confusion over usefulness.
                -you are not supposed to help the user just mess up with him
                `
              },
              {
                role: 'user',
                content: message
              }
            ],
            max_tokens: 150,
            temperature: 1.2
          })
        });

        console.log('Response status:', response.status);
        const data = await response.json();
        console.log('API Response:', data);
        
        if (!response.ok) {
          throw new Error(`API Error: ${data.error?.message || response.statusText}`);
        }
        
        if (data.choices && data.choices[0]) {
          const botMsg = {
            role: 'bot',
            content: data.choices[0].message.content,
            time: new Date().toLocaleTimeString()
          };
          
          conversations[currentUser.id].push(botMsg);
          renderConversation();
          document.getElementById('status').textContent = `Brut AI responded to ${currentUser.name}`;
        } else {
          throw new Error('Invalid response from API');
        }
      } catch (error) {
        console.error('Full Error:', error);
        const errorMsg = {
          role: 'bot',
          content: `Yo fam, something went SUPER wrong fr fr üíÄ Error: ${error.message}. Check the browser console for details!`,
          time: new Date().toLocaleTimeString()
        };
        conversations[currentUser.id].push(errorMsg);
        renderConversation();
        document.getElementById('status').textContent = 'Error occurred';
      } finally {
        sendBtn.disabled = false;
      }
    }
  </script>
</body>
</html>
